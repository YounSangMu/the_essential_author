<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>GA 통합 트래커</title>

  <!-- Google Analytics 스크립트 -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-H24S7LJMLB"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    
    // 페이지 방문 트래킹
    gtag('js', new Date());
    gtag('config', 'G-H24S7LJMLB');

    // 버튼 클릭 이벤트 트래킹
    function trackButtonClick(eventLabel) {
      console.log("버튼 클릭 발생:", eventLabel);  // 디버깅용 출력
      gtag('event', 'button_click', {
        'event_category': 'interaction',
        'event_label': eventLabel,
        'value': 1
      });
    }
  </script>
</head>
<body>
  <h3>GA 통합 트래커 실행 중...</h3>

  <!-- 숨겨진 버튼 (Streamlit에서 trigger) -->
  <button id="hiddenButton" onclick="trackButtonClick('Streamlit Button')" style="display:none;">
    숨겨진 버튼
  </button>

  <script>
    // URL 파라미터 확인 → 버튼 클릭 자동 실행
    const urlParams = new URLSearchParams(window.location.search);
    if (urlParams.get('click') === 'true') {
      console.log("자동 클릭 실행됨");  // 디버깅용 출력
      document.getElementById('hiddenButton').click();
    }
  </script>
</body>
</html>
